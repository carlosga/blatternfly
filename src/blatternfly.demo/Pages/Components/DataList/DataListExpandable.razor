<Button OnClick="OnToggleAll">
  @if (AllExpanded) { <AngleDownIcon/> } else { <AngleRightIcon/> }
  Expand/Collapse All
</Button>
<br />
<br />
<DataList AriaLabel="Expandable data list example">
  <DataListItem AriaLabelledBy="ex-item1" IsExpanded="@ItemState1.IsExpanded">
    <DataListItemRow>
      <DataListToggle
        OnToggle="@ItemState1.OnToggle"
        IsExpanded="@ItemState1.IsExpanded"
        Id="ex-toggle1"
        AriaControls="ex-expand1"
      />
      <DataListItemCells>
        <DataListCell IsIcon @key="1">
          <CodeBranchIcon />
        </DataListCell>
        <DataListCell @key="2">
          <div id="ex-item1">Primary content</div>
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
          <a href="#">link</a>
        </DataListCell>
        <DataListCell @key="3">
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
        <DataListCell @key="4">
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
      </DataListItemCells>
      <DataListAction
        aria-labelledby="ex-item1 ex-action1"
        id="ex-action1"
        IsPlainButtonAction
      >
        <Dropdown IsPlain Position="DropdownPosition.Right">
          <Toggle>
            <KebabToggle AriaLabel="Actions" />
          </Toggle>
          <DropdownItems>
            <DropdownItem @key="1">Link</DropdownItem>
            <DropdownItem @key="2" Component="button">
              Action
            </DropdownItem>
            <DropdownItem @key="3" IsDisabled>
              Disabled Link
            </DropdownItem>
          </DropdownItems>
        </Dropdown>
      </DataListAction>
    </DataListItemRow>
    <DataListContent
      AriaLabel="Primary Content Details"
      id="ex-expand1"
      IsHidden="@ItemState1.IsContentHidden"
    >
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
        dolore magna aliqua.
      </p>
    </DataListContent>
  </DataListItem>
  <DataListItem AriaLabelledBy="ex-item2" IsExpanded="@ItemState2.IsExpanded">
    <DataListItemRow>
      <DataListToggle
        OnToggle="@ItemState2.OnToggle"
        IsExpanded="@ItemState2.IsExpanded"
        Id="ex-toggle2"
        AriaControls="ex-expand2"
      />
      <DataListItemCells>
        <DataListCell IsIcon @key="1">
          <CodeBranchIcon />
        </DataListCell>
        <DataListCell @key="2">
          <div id="ex-item2">Secondary content</div>
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
        <DataListCell @key="3">
          <span>Lorem ipsum dolor sit amet.</span>
        </DataListCell>
        <DataListCell @key="4">
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
      </DataListItemCells>
      <DataListAction
        aria-labelledby="ex-item2 ex-action2"
        id="ex-action2"
        IsPlainButtonAction
      >
        <Dropdown IsPlain Position="DropdownPosition.Right">
          <Toggle>
            <KebabToggle AriaLabel="Actions" />
          </Toggle>
          <DropdownItems>
            <DropdownItem @key="1">Link</DropdownItem>
            <DropdownItem @key="2" Component="button">
              Action
            </DropdownItem>
            <DropdownItem @key="3" IsDisabled>
              Disabled Link
            </DropdownItem>
          </DropdownItems>
        </Dropdown>
      </DataListAction>
    </DataListItemRow>
    <DataListContent
      AriaLabel="Primary Content Details"
      id="ex-expand2"
      IsHidden="@ItemState2.IsContentHidden"
    >
      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
        dolore magna aliqua.
      </p>
    </DataListContent>
  </DataListItem>
  <DataListItem AriaLabelledBy="ex-item3" IsExpanded="@ItemState3.IsExpanded">
    <DataListItemRow>
      <DataListToggle
        OnToggle="@ItemState3.OnToggle"
        IsExpanded="@ItemState3.IsExpanded"
        Id="ex-toggle3"
        AriaControls="ex-expand3"
      />
      <DataListItemCells>
        <DataListCell IsIcon @key="1">
          <CodeBranchIcon />
        </DataListCell>
        <DataListCell @key="2">
          <div id="ex-item3">Tertiary content</div>
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
        <DataListCell @key="3">
          <span>Lorem ipsum dolor sit amet.</span>
        </DataListCell>
        <DataListCell @key="4">
          <span>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
        </DataListCell>
      </DataListItemCells>
      <DataListAction
        aria-labelledby="ex-item3 ex-action3"
        id="ex-action3"
        IsPlainButtonAction
      >
        <Dropdown IsPlain Position="DropdownPosition.Right">
          <Toggle>
            <KebabToggle AriaLabel="Actions" />
          </Toggle>
          <DropdownItems>
            <DropdownItem @key="1">Link</DropdownItem>
            <DropdownItem @key="2" Component="button">
              Action
            </DropdownItem>
            <DropdownItem @key="3" IsDisabled>
              Disabled Link
            </DropdownItem>
          </DropdownItems>
        </Dropdown>
      </DataListAction>
    </DataListItemRow>
    <DataListContent
      AriaLabel="Primary Content Details"
      Id="ex-expand3"
      IsHidden="@ItemState3.IsContentHidden"
      HasNoPadding
    >
      This expanded section has no padding.
    </DataListContent>
  </DataListItem>
</DataList>

@code {
  private bool AllExpanded { get; set; }

  private DataListItemState ItemState1 { get; } = new ();
  private DataListItemState ItemState2 { get; } = new ();
  private DataListItemState ItemState3 { get; } = new ();
  private DataListItemState ItemState4 { get; } = new ();

  private void OnToggleAll(MouseEventArgs args)
  {
    AllExpanded           = !AllExpanded;
    ItemState1.IsExpanded = AllExpanded;
    ItemState2.IsExpanded = AllExpanded;
    ItemState3.IsExpanded = AllExpanded;
  }

  public sealed class DataListItemState
  {
    public bool IsExpanded      { get; set;}
    public bool IsContentHidden { get => !IsExpanded; }

    public void OnToggle(MouseEventArgs args)
    {
      IsExpanded = !IsExpanded;
    }
  }
}