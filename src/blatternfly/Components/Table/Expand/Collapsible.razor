@namespace Blatternfly.Components
@inherits BaseComponent

<CollapseColumn
  aria-labelledby="@AriaLabelledBy"
  OnToggle="@OnToggle"
  id="@ColumnId"
  IsOpen="@IsOpen"
>
  @ChildContent 
</CollapseColumn>

@code {
  [Parameter] public bool IsOpen { get; set; }
  
  [Parameter] public string RowLabeledBy { get; set; } = "simple-node";

  [Parameter] public string ExpandId { get; set; } = "expand-toggle";

  [Parameter] public int RowIndex { get; set; }
  
  [Parameter] public int? ColumnIndex { get; set; }
  
  [Parameter] public EventCallback<CollapseEventArgs> OnCollapse { get; set; }

  private string ColumnId       { get => $"{ExpandId}{RowIndex}"; }
  private string AriaLabelledBy { get => $"{RowLabeledBy}{RowIndex} {ExpandId}{RowIndex}"; } 
  
  private async Task OnToggle(MouseEventArgs args)
  {
    IsOpen = !IsOpen;
    await OnCollapse.InvokeAsync(new CollapseEventArgs { RowIndex = RowIndex, IsOpen = IsOpen });
  }
}