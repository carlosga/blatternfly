@namespace Blatternfly.Components

@if (ShowBackgroundImg)
{
<BackgroundImage Source="@BackgroundImgSrc" FilterId="@BackgroundImgFilterId" alt="@BackgroundImgAlt" />
}
<Login @attributes="AdditionalAttributes">
  <Header>
    <LoginHeader>
      <HeaderBrand>
        <Brand Src="@BrandImgSrc" Alt="@BrandImgAlt" />
      </HeaderBrand>
    </LoginHeader>
  </Header>
  <ChildContent>
    <LoginMainHeader Title="@LoginTitle" Subtitle="@LoginSubtitle" HeaderUtilities="@HeaderUtilities" />
    <LoginMainBody>@ChildContent</LoginMainBody>
    @if (ShowMainFooter)
    {
      <LoginMainFooter>
        <SocialMediaLoginContent>
          @SocialMediaLoginContent
        </SocialMediaLoginContent>
        <ForgotCredentials>
          @ForgotCredentials
        </ForgotCredentials>
        <SignUpForAccountMessage>
          @SignUpForAccountMessage
        </SignUpForAccountMessage>
      </LoginMainFooter>
    }
  </ChildContent>
  <Footer>
    <LoginFooter>
      <p>@TextContent</p>
      <List Variant="@FooterListVariants">@FooterListItems</List>
    </LoginFooter>
  </Footer>
</Login>

@code {
  /// Additional attributes that will be applied to the component.
  [Parameter(CaptureUnmatchedValues = true)] public IReadOnlyDictionary<string, object> AdditionalAttributes { get; set; }

  /// Content rendered inside the component.
  [Parameter] public RenderFragment ChildContent { get; set; }

  /// Attribute that specifies the URL of the brand image for the login page.
  [Parameter] public string BrandImgSrc { get; set; }

  /// Attribute that specifies the alt text of the brand image for the login page.
  [Parameter] public string BrandImgAlt { get; set; }

  /// Attribute that specifies the URL of the background image for the login page.
  [Parameter] public BackgroundImageSrcMap BackgroundImgSrc { get; set; }

  /// Attribute that specifies the alt text of the background image for the login page.
  [Parameter] public string BackgroundImgAlt { get; set; }

  /// Content rendered inside of the text component of the login page.
  [Parameter] public string TextContent { get; set; }

  /// Items rendered inside of the footer list component of the login page.
  [Parameter] public RenderFragment FooterListItems { get; set; }

  /// Adds list variant styles for the footer list component of the login page. The only current value is'inline'.
  [Parameter] public ListVariant FooterListVariants { get; set; } = ListVariant.Inline;

  /// Title for the login main body header of the login page.
  [Parameter] public string LoginTitle { get; set; }

  /// Subtitle for the login main body header of the login page.
  [Parameter] public string LoginSubtitle { get; set; }

  /// Header utilities for the login main body header of the login page.
  [Parameter] public RenderFragment HeaderUtilities { get; set; }

  /// Content rendered inside of login main footer band to display a sign up for account message.
  [Parameter] public RenderFragment SignUpForAccountMessage { get; set; }

  /// Content rendered inside of login main footer band to display a forgot credentials link.
  [Parameter] public RenderFragment ForgotCredentials { get; set; }

  /// Content rendered inside of social media login footer section.
  [Parameter] public RenderFragment SocialMediaLoginContent { get; set; }

  /// Attribute that specifies the filter id of the background image for the login page.
  [Parameter] public string BackgroundImgFilterId { get; set;  }

  private bool ShowMainFooter
  {
    get => SocialMediaLoginContent is not null || ForgotCredentials is not null || SignUpForAccountMessage is not null;
  }
  private bool ShowBackgroundImg
  {
    get => BackgroundImgSrc is not null && BackgroundImgSrc.IsNotEmpty;
  }
}