@namespace Blatternfly.Components
@inject IPortalConnector Connector;

@Portal?.ChildContent

@code {
  [Parameter] public EventCallback OnAttach { get; set; }
  [Parameter] public EventCallback OnDetach { get; set; }

  private Portal Portal { get; set; }

  internal async Task Attach(Portal portal)
  {
    Portal = portal;
    await OnAttach.InvokeAsync();
    StateHasChanged();
  }
  
  internal async Task Detach(Portal portal)
  {
    Portal = null;
    await OnDetach.InvokeAsync();
    StateHasChanged();
  }
  
  internal bool CanAttach { get => Portal is null;}

  protected override void OnInitialized()
  {
    base.OnInitialized();
    
    Connector.Register(this);
  }
}