@namespace Blatternfly.Components
@inherits BaseComponent

<div @attributes="AdditionalAttributes" class="@CssClass">
  <span class="pf-c-notification-drawer__list-item-header-icon">
    @if (Icon is not null)
    {
      @Icon
    }
    else
    {
      if (Variant == SeverityLevel.Success)
      {
        <CheckCircleIcon />
      }
      else if (Variant == SeverityLevel.Danger)
      {
        <ExclamationCircleIcon />
      }
      else if (Variant == SeverityLevel.Warning)
      {
        <ExclamationTriangleIcon />
      }
      else if (Variant == SeverityLevel.Info)
      {
        <InfoCircleIcon />
      }
      else
      {
        <BellIcon />
      }
    }
  </span>
  <h2 class="@TitleCssClass" style="@TitleCssStyle">
    @if (!string.IsNullOrEmpty(ScreenReaderTitle))
    {
      <span class="pf-u-screen-reader">@ScreenReaderTitle</span>
    }
    @Title
  </h2>
</div>
@if (ChildContent is not null)
{
  <div class="pf-c-notification-drawer__list-item-action">@ChildContent</div>
}

@code {
  ///  Add custom icon for notification drawer list item header.
  [Parameter] public RenderFragment Icon { get; set; }

  ///  Notification drawer list item header screen reader title.
  [Parameter] public string ScreenReaderTitle { get; set; }

  ///  Notification drawer list item title.
  [Parameter] public string Title { get; set; }

  ///  Variant indicates the severity level.
  [Parameter] public SeverityLevel Variant { get; set; } = SeverityLevel.Default;

  /// Truncate title to number of lines.
  [Parameter] public int TruncateTitle { get; set; }

  private string CssClass => new CssBuilder("pf-c-notification-drawer__list-item-header")
    .AddClassFromAttributes(AdditionalAttributes)
    .Build();

  private string TitleCssClass => new CssBuilder("pf-c-notification-drawer__list-item-header-title")
    .AddClass("pf-m-truncate", TruncateTitle > 0)
    .Build();

  private string TitleCssStyle => new StyleBuilder()
    .AddStyle("--pf-c-notification-drawer__list-item-header-title--max-lines", TruncateTitle, TruncateTitle > 0)
    .Build();
}